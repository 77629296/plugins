# @amplication/plugin-auth-supertokens

[![NPM Downloads](https://img.shields.io/npm/dt/@amplication/plugin-auth-basic)](https://www.npmjs.com/package/@amplication/plugin-auth-basic)

Use supertokens for authentication in the service generated by Amplication.

## Purpose

This plugin adds the required code to use supertokens for authentication in the service generated by Amplication.

It updates the following parts:
- Adds the required dependencies to `package.json`.
- Adds the required environment variables to `.env`.
- Adds an `auth` folder with the authentication module.
- Adds the `AuthModule` configured to use supertokens to the `app.module.ts` module imports list.
- Adds some setup in the `connectMicroservices.ts` file.

## Configuration

If no configuration is provided the .amplicationrc.json file will use be used as the default values.

An example:

```json
{
    "apiDomain": "http://localhost:3000",
    "appName": "Amplication App",
    "websiteDomain": "http://localhost:3000",
    "websiteBasePath": "/auth",
    "apiBasePath": "/api/auth",
    "connectionUri": "https://try.supertokens.com",
    "apiGatewayPath": "/gateway"
}
```

## Scripts

### `build`

Running `npm run build` will bundle your plugin with Webpack for production.

### `dev`

Running `npm run dev` will watch your plugin's source code and automatically bundle it with every change.

### `test`

Running `npm run test` will run the plugin's test suite.

## Usage

To configure, set the following environment variables:

SUPERTOKENS_CONNECTION_URI - The url link to the supertokens core.

SUPERTOKENS_APP_NAME - The name of the app.

SUPERTOKENS_API_DOMAIN - The API domain.

SUPERTOKENS_WEBSITE_DOMAIN - The website domain.

SUPERTOKENS_API_BASE_PATH - The API server base path for the auth urls.

SUPERTOKENS_WEBSITE_BASE_PATH - The website base path.

SUPERTOKENS_API_KEY - The supertokens API key.

SUPERTOKENS_API_GATEWAY_PATH - The API gateway path.


In the generated `auth` module, there is a `recipes.ts` file containing a const `recipeList`. Add your
preferred recipes to this list to configure supertokens to use those recipes.
